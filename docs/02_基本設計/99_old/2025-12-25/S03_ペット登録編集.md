# 画面詳細：S03 ペット登録/編集

## 1. 目的
ペットの基本情報を登録・編集する。

---

## 2. URL
- `/pets/new  または  /pets/:petId/edit`

---

## 3. 対象ユーザー / 権限
- MVP：認証なし（シングルユーザー想定）

---

## 4. 画面構成（概要）
- フォーム（縦積み）
- フッター：保存/キャンセル

---

## 5. 画面項目一覧
| No | 項目名 | 種別 | 表示データ | 状態 | 必須 | 備考 |
|---|---|---|---|---|---|---|
| 1 | 名前 | テキスト | pets | name | 必須 | 1〜50文字 |
| 2 | 種別 | セレクト | — | species | 必須 | dog/cat/other |
| 3 | 品種 | テキスト | — | breed | 任意 | 0〜50文字 |
| 4 | 性別 | セレクト | — | sex | 任意 | male/female/unknown |
| 5 | 誕生日 | 日付 | — | birthday | 任意 | 未来日不可推奨 |
| 6 | メモ | テキストエリア | — | notes | 任意 | 長文は上限設定可 |
| 7 | 保存 | ボタン | — | — | — | POST/PUT |
| 8 | キャンセル | ボタン | — | — | — | 遷移元へ戻る |


---

## 6. 操作・イベント一覧
| イベント | 処理概要 | 呼び出すAPI | 備考 |
|---|---|---|---|
| 初期表示（新規） | 空フォーム表示 | — |  |
| 初期表示（編集） | ペット詳細を取得しフォームに反映 | GET /pets/{pet_id} |  |
| 保存（新規） | 入力検証→作成→S04へ | POST /pets | 成功後は作成したpet_idでS04へ |
| 保存（編集） | 入力検証→更新→S04へ | PUT /pets/{pet_id} |  |
| キャンセル | 遷移元へ戻る | — | 新規はS02、編集はS04推奨 |


---

## 7. 使用API
- `GET /api/pets/{pet_id}`（編集初期表示）
- `POST /api/pets`（新規保存）
- `PUT /api/pets/{pet_id}`（編集保存）

---

## 8. バリデーション / 入力ルール（MVP）
- name：必須、1〜50文字
- species：必須、dog/cat/other
- breed：0〜50文字
- sex：male/female/unknown
- birthday：YYYY-MM-DD（未来日不可推奨）
- notes：任意（上限は実装で制限可）

---

## 9. エラー/例外時の表示
- 保存失敗：エラートースト（詳細はサーバの `detail`）
- バリデーションエラー：項目下にエラーメッセージ表示

---

## 10. 備考（将来拡張）
- 将来：ペット画像、体重の単位切替、複数飼い主（共有）
