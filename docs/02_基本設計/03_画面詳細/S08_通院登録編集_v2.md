# S08 通院登録/編集 画面詳細（v2）

## 1. 画面概要
- **目的**: 通院情報を「最短・最小のストレス」で記録できるようにする（カルテの主役）。
- **URL**:
  - 新規: `/pets/:petId/vet-visits/new`
  - 編集: `/pets/:petId/vet-visits/:visitId/edit`

---

## 2. 入力方針（重要）
- **要点（必須に近い）→ 詳細（任意）** の二段構成
- 1回の通院が入力できれば成立（複数通院の繰り返しは不要）

---

## 3. 画面項目一覧

| No | 物理名 | 項目名 | 種類 | 必須 | 入力仕様 | 備考 |
|---:|---|---|---|---|---|---|
| 1 | visited_on | 受診日 | 日付 | 推奨 | YYYY-MM-DD | ※未導入ならrecorded_onで代替 |
| 2 | hospital_name | 病院名 | テキスト | 推奨 | 最大100 | 履歴候補（任意） |
| 3 | doctor_name | 医師名 | テキスト | 任意 | 最大100 | |
| 4 | chief_complaint | 受診理由（主訴） | テキスト | 任意 | 最大200 | チップ入力（将来） |
| 5 | diagnosis | 診断結果 | テキスト | 任意 | 最大200 | |
| 6 | cost_yen | 費用（円） | 数値 | 任意 | 0以上、整数 | |
| 7 | note | メモ | テキストエリア | 任意 | 最大2000 | |
| 8 | actions.save | 保存 | ボタン | - | 新規/更新 | |
| 9 | actions.cancel | キャンセル | ボタン | - | 一覧へ戻る | |
|10 | actions.delete | 削除 | ボタン | 任意 | 編集時のみ | 論理削除推奨 |

---

## 4. バリデーション
- visited_on: 日付形式
- cost_yen: 数値、0以上
- 文字数: 各maxを超えたらエラー表示

---

## 5. 操作フロー
### 5.1 新規
1. 初期値（visited_on=今日）をセット
2. 入力
3. 保存 → S09（詳細）へ遷移

### 5.2 編集
1. visitIdからデータ取得して表示
2. 保存 → S09へ

---

## 6. エラーハンドリング
- 保存失敗: エラー表示 + 入力保持
- 編集で取得失敗: リトライ + 一覧へ戻る導線

---

## 7. UXメモ
- 最上段に「受診日」「病院名」を置く（迷わせない）
- 入力補助（履歴候補）はMVPではlocalStorageでも可
