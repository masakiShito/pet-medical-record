# 画面詳細：S04 ペット詳細（カルテ：時系列）

## 1. 目的
ペット単位で記録を時系列に閲覧し、記録の追加・詳細閲覧へ誘導する中心画面。

---

## 2. URL
- `/pets/:petId`

---

## 3. 対象ユーザー / 権限
- MVP：認証なし（シングルユーザー想定）

---

## 4. 画面構成（概要）
- ヘッダ：ペット情報 + 編集
- フィルタ：期間
- 本文：記録タイムライン
- CTA：記録追加

---

## 5. 画面項目一覧
| No | 項目名 | 種別 | 表示データ | 状態 | 必須 | 備考 |
|---|---|---|---|---|---|---|
| 1 | ペット基本情報ヘッダ | 表示 | pet詳細 | — | — | 名前/種別/性別/誕生日など |
| 2 | 期間フィルタ | 日付From/To | — | from/to | 任意 | MVPは直近n件でも可 |
| 3 | 記録タイムライン | リスト | records一覧 | — | — | クリックでS06へ |
| 4 | 記録追加 | ボタン | — | — | — | S05(new)へ |
| 5 | ペット編集 | ボタン | — | — | — | S03(edit)へ |


---

## 6. 操作・イベント一覧
| イベント | 処理概要 | 呼び出すAPI | 備考 |
|---|---|---|---|
| 初期表示 | ペット詳細+記録一覧取得 | GET /pets/{pet_id}, GET /pets/{pet_id}/records | 並列取得推奨 |
| 期間変更 | 記録一覧を再取得 | GET /pets/{pet_id}/records | from/to/limit/offset |
| 記録クリック | 記録詳細へ遷移 | — | /pets/:petId/records/:recordId |
| 記録追加 | 記録登録へ遷移 | — | /pets/:petId/records/new |
| ペット編集 | ペット編集へ遷移 | — | /pets/:petId/edit |


---

## 7. 使用API
- `GET /api/pets/{pet_id}`
- `GET /api/pets/{pet_id}/records?from=&to=&limit=&offset=`

---

## 8. バリデーション / 入力ルール（MVP）
- 期間フィルタ：from <= to（UI側で制御）

---

## 9. エラー/例外時の表示
- 取得失敗：エラートースト+再試行
- 記録0件：Empty State（『今日の記録を追加』）

---

## 10. 備考（将来拡張）
- 将来：種別フィルタ（体重/投薬/通院）、無限スクロール、体重グラフ
